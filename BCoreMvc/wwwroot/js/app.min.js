var Blog,Post,Common;(function(n){var t=function(){function n(n){this.elModalForm=$("#codeModalForm");this.elButtonUpload=$("#codeButtonUpload");this.owner=n;this.init()}return n.prototype.init=function(){var n=this;this.elModalForm.on("shown.bs.modal",function(t){return n.formShow(t)});this.elButtonUpload.on("click",function(t){return n.submit(t)})},n.prototype.formShow=function(){this.initAceEditor();this.elButtonUploadDisabled()},n.prototype.initAceEditor=function(){var n=this;this.editor=ace.edit("codeText");this.editor.setTheme("ace/theme/twilight");this.editor.renderer.setShowGutter(!1);this.editor.focus();this.editor.on("change",function(t){return n.editorChangeValue(t)})},n.prototype.elButtonUploadDisabled=function(){this.elButtonUpload.prop("disabled",typeof this.editor=="undefined"||this.isEmpty(this.editor.getValue()))},n.prototype.editorChangeValue=function(){this.elButtonUploadDisabled()},n.prototype.isEmpty=function(n){return n.replace(new RegExp("\r\n","g"),"").replace(/\s/g,"").trim().length==0},n.prototype.submit=function(n){var t=this;this.owner.elCode.val(this.editor.getValue());this.owner.post(n);setTimeout(function(){t.elModalForm.modal("hide")},250)},n}();n.Code=t})(Blog||(Blog={})),function(n){var t=function(){function n(n){this.elBrowseText=$("#imageBrowseText");this.elPreview=$("#imageUploadPreview");this.elBrowseButton=$("#imageBrowseBtnUpload");this.elInput=$("#imageInputUpload");this.elButtonUpload=$("#imageButtonUpload");this.elFileName=$("#imageFileNameUpload");this.elModalForm=$("#imageModalForm");this.reader=new FileReader;this.dataSubmit=null;this.owner=n;this.url="/FileHandler/Upload?objectContext="+this.owner.userId;this.init()}return n.prototype.init=function(){var n=this;this.elButtonUpload.prop("disabled",!0);NProgress.configure({parent:"#imageProgressUpload",showSpinner:!1});this.elInput.fileupload({url:this.url,dataType:"json",autoUpload:!1,singleFileUploads:!0,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,add:function(t,i){return n.addDataSubmit(t,i)},start:function(){return n.startUpload()},done:function(t,i){return n.doneUpload(t,i)}});this.elBrowseButton.on("click",function(t){return n.browse(t)});this.elButtonUpload.on("click",function(t){return n.submit(t)});this.elInput.on("change",function(t){return n.inputChange(t)});this.reader.onload=function(t){return n.onLoad(t)}},n.prototype.browse=function(){this.dataSubmit=null;this.elInput.html(this.elInput.html())},n.prototype.inputChange=function(n){var t=n.currentTarget,i=t.value;this.elFileName.val(i.replace(/^.*[\\\/]/,""));this.reader.readAsDataURL(t.files[0])},n.prototype.submit=function(){this.dataSubmit!=null&&this.dataSubmit.submit()},n.prototype.onLoad=function(){this.elPreview.attr("src",this.reader.result);this.elButtonUpload.prop("disabled",!1);this.elBrowseText.hide()},n.prototype.startUpload=function(){NProgress.start()},n.prototype.addDataSubmit=function(n,t){this.dataSubmit=t},n.prototype.doneUpload=function(n,t){var i=this;NProgress.done(!0);this.owner.elImageUrl.val(t.result.files.length>0?t.result.files[0].url:"");this.owner.post(n);setTimeout(function(){i.elModalForm.modal("hide")},250)},n}();n.Image=t}(Blog||(Blog={})),function(n){var t=function(){function t(n){var t=this;this.elSubmitForm=$("#whatsNewForm");this.elInput=$("#whatsNewText");this.elImageUrl=$("#whatsNewImageUrl");this.elVideoUrl=$("#whatsNewVideoUrl");this.elGeo=$("#whatsNewGeo");this.elCode=$("#whatsCode");this.elPostButton=$("#whatsNewPostButton");this.elPost=$("#whatsNewPost");this.elDropdown=$(".dropdown-toggle");this.userId=n;this.elPostButton.on("click",function(n){return t.post(n)});this.init()}return t.prototype.init=function(){this.modalImage=new n.Image(this);this.modalCode=new n.Code(this);autosize(this.elInput);this.elInput.val("");autosize.update(this.elInput);this.elInput.focus();this.elImageUrl.val("");this.elDropdown.dropdown()},t.prototype.post=function(n){var t=this;n.preventDefault();this.elPost.load("/Update/Post",this.elSubmitForm.serializeArray(),function(){return t.init()})},t}();n.WhatsNew=t}(Blog||(Blog={})),function(n){var t=function(){function n(){var n=this;this.elBody=$("body");this.elInput=$("#commentInput");this.elDropdown=$(".dropdown-toggle");autosize(this.elInput);autosize.update(this.elInput);this.elDropdown.dropdown();this.elInput.val("");this.elInput.appear();this.elInput.on("appear",function(t,i){return n.inputAppear(t,i)})}return n.prototype.inputAppear=function(n,t){location.hash=="#commentAnchor"&&t.focus()},n}();n.Comment=t}(Post||(Post={})),function(n){var r=function(){function n(){this.confirm=new t}return n}(),i,t;n.App=r;i=function(){function n(n,t,i,r){var u=this;if(this.url=n,this.page=Number(t),this.elContainer=i,this.elButtonDone=r,this.elButtonDone)this.elButtonDone.on("click",function(n){return u.loadPage(n)})}return n.prototype.loadPage=function(){var n=this;this.elContainer&&this.elContainer.append($("<div>").load(this.url,{page:this.page+1},function(t,i,r){return n.init(t,i,r)}))},n.prototype.init=function(n,t,i){t!="success"||i.status!=200||this.isEmpty(n)||!this.isHtml(n)?this.elButtonDone.hide():this.page++},n.prototype.isEmpty=function(n){return n.replace(new RegExp("\r\n","g"),"").replace(/\s/g,"").trim().length==0},n.prototype.isHtml=function(n){return/<[a-z\][\s\S]*>/i.test(n)},n}();n.Pager=i;t=function(){function n(){var n=this;this.elConfirm=$("a[data-confirm]");this.elConfirm.on("click",function(t){return n.showDialog(t)})}return n.prototype.showDialog=function(n){var t=this;n.preventDefault();this.elTarget=$(n.target);bootbox.confirm({title:this.elTarget.attr("data-confirm-title"),message:this.elTarget.attr("data-confirm"),size:"small",buttons:{confirm:{label:"Yes",className:"btn-danger"},cancel:{label:"No",className:"btn-success"}},callback:function(n){return t.handlerDialogResult(n)}})},n.prototype.handlerDialogResult=function(n){if(n){var t=this.elTarget.attr("href");typeof t!="undefined"&&t&&t.length>0&&(window.location.href=t)}},n}();n.ConfirmDialog=t}(Common||(Common={}));